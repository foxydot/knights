//Utility functions
function split_to_array(e,t){var n=e.split(t),r=new Array,s=new Array;for(i=0;i<n.length;i++)i%2===0?r[i/2]=n[i]:s[Math.floor(i/2)]=n[i];return array_combine(r,s)}function array_combine(e,t){var n={},r=e&&e.length,i=0;if(typeof e!="object"||typeof t!="object"||typeof r!="number"||typeof t.length!="number"||!r)return!1;if(r!=t.length)return!1;for(i=0;i<r;i++)n[e[i]]=t[i];return n}$(document).ready(function(e){e("#change_img").click(function(){e(this).parents("form").find(".img-upload").toggle();e(this).parents("form").find(".img-display").toggle()});e(".accordion-toggle").click(function(){e(this).find("i").removeClass("icon-expand").removeClass("icon-collapse");e(this).hasClass("collapsed")?e(this).find("i").addClass("icon-expand"):e(this).find("i").addClass("icon-collapse")});e(".attachment-delete").click(function(){var t=confirm("Are you sure you want to delete this image?");if(t==1){var n=split_to_array(e(this).attr("id"),":"),r=e(this);e.post("/ajax/unpublish_attachment",{infoArray:n},function(e){e&&r.parent("li").hide()})}});e(".edit #type,.add #type").change(function(){var t=e(this).val(),n="Price";t.indexOf("service")>=0&&(n="Price per hour");e(".edit #cost,.add #cost").attr("placeholder",n)});e(".edit #delete_btn").click(function(){var t=confirm("Are you sure you want to delete this post?");if(t==1){var n=e(this).parents("form");n.attr("action",n.attr("action").replace("edit","delete"));n.submit()}});e(".buy #payment_option_paypal,.invoice #payment_option_paypal").click(function(){e(".payment_info").slideUp();e("#paypal_info").slideDown();e("#buyform").attr("action",e("#paypal_action").val())});e(".buy #payment_option_check,.invoice #payment_option_check").click(function(){e(".payment_info").slideUp();e("#check_info").slideDown();e("#buyform").attr("action",e("#check_action").val())});var t=!1;e("buyform").submit(function(n){if(!t)n.preventDefault();else{var r={buyer_id:e(this).find("#buyer_id").val(),post_id:e(this).find("#ID").val()};e.post("/ajax/buy_item",{infoArray:r},function(n){if(n){t=!0;e("#buyform").submit()}})}});e(".articlelist .sortable").sortable({placeholder:"ui-state-highlight"});location.hash&&e(location.hash+".collapse").collapse("show")});